<!-- Coded by Omar and Youssef-->
<!DOCTYPE html>
{% load static %} 
<html>
    <head>
        <title>Eye tracking visualizations</title>
<!--<link href="{% static 'style/css.css' %}" rel="stylesheet" type="text/css" > ---> 
    </head>
    <body>
        <div class="heading">
			<span class="Main_title">Visualizations made according to eye tracking terminology</span>
			<span class="Sub_introduction">Welcome to our eye tracking visualization page. Here you will find all the tools you need to get a better visual representation of your eye tracking data. The eye tracking data currently in the site is from a research regarding train maps. On this page you will find each of the four visualizations, you can select which map you want to look at and which user looking at that map. Another element of the data is the version of the map, the options are grayscale or colored, this setting can also be selected. This way you can find details of a user looking at a specified map.
				If you want to know more about the differences in the grayscale and colored version of one map, go to the page “Color comparison”. On that page you will see the same four visualizations, with in each graph 2 data groups, one for the colored map and one for the greyscale map of the same user. Here you can select which map and which user you want to view.
				If you want to know more about differences amongst different users for a map, find the page for user comparison. Here you will see those same visualizations, with the option to add multiple users to each graph to compare them to each other. This page allows you to choose which map, and which, as well as how many, users you are looking at. You can decide whether to view the differences between users on the colored or grayscale version of a map.
				Lastly if you want to compare two users, graphs or visualizations more extensively find the page “Manual comparison”. Here you can select two visualizations and their contents, the user, the map and its version. This way you can compare two contour plots of different users or map versions, or any other combination of graphs useful for your specific research.
				To upload your own dataset of your eye-tracking research, find the upload button of the menu bar, where you can select a csv file and upload it to the website. Important is the ordering of the columns: “Timestamp”, “Stimuli name”, “Fixation index”, “Fixation duration”, “Mapped fixation point X”, “Mapped fixation point Y”, “User”, “Description”, as well as the fact that they are separated using a tab.
				</span>
				<div class = "Buttons">
					<a href="/import"><button class="Upload">
						Upload
					</button></a>
					<a href="/user"><button class="User_comparison">
						User Comparison
					</button></a>
					<a href="/color"><button class="Color_comparison">
						Color Comparison
					</button></a>
					<a href="/manual"><button class="Manual_comparison">
						Manual Comparison
					</button></a>
				</div>
				<span class = "dropdowns">
					<!-- Start Coding Tarik Hacialiogullari -->
					Select a stimuli:
					<!-- When there is selected (e.g. onchange) a different stimuli, it calls the javascript function changeStimuli with the newly selected stimuli -->
					<select onchange="changeStimuli(this.value)">
						<!-- Loop through every stimuli in the stimuli_list variable -->
						{% for stimuli in stimuli_list %}
						<div>
							<!-- If the stimuli is not selected just put it as dropdown option-->
							{% if stimuli != selected_stimuli %}
								<option value="{{ stimuli }}">{{ stimuli }}</option>
							<!-- else the stimuli is selected then put it in the dropdownlist and select it.-->
							{% else %}
								<option selected="selected" value="{{ stimuli }}">{{ stimuli }}</option>
							{% endif %}
						</div>
						{% endfor %}
					</select>
					<!-- When there is selected (e.g. onchange) a different user, it calls the javascript function changeUser with the newly selected user -->
					Select an user:
					<select onchange="changeUser(this.value)">
						{% for user in user_list %}
						<div>
							{% if user != selected_user %}
								<option value="{{ user }}">{{ user }}</option>
							{% else %}
								<option selected="selected" value="{{ user }}">{{ user }}</option>
							{% endif %}
						</div>
						{% endfor %}
					</select>
					Select the color:
					<!-- When there is selected (e.g. onchange) a different color, it calls the javascript function changeColor with the newly selected color -->
					<select onchange="changeColor(this.value)">
						{% if "gray" != selected_color %}
						<option selected="selected" value="color">Color</option>
						<option value="gray">Gray</option>
						{% else %}
						<option value="color">Color</option>
						<option selected="selected" value="gray">Gray</option>
						{% endif %}
					</select>
					<!-- End Coding Tarik Hacialiogullari -->
				</span>
				
					<h1 style="color:yellowgreen;">Gaze plot and Line chart:</h1>
					{{ graphs_bokeh | safe }}
					<h1 style="color:yellowgreen;">Bar chart:</h1>
					{{ graph_bar | safe }}
				
				

<h1 style="color:yellowgreen;">Plotly's Contour map:</h1>
{{ graph_contour | safe }}

    </body>
	{{ script_bokeh | safe }}
	{{ script_bar | safe }}

	<!-- Start Coding Tarik Hacialiogullari -->
	<script>
		// This changes the URL paramater like '?stimuli=01_Mecca_s1.jpg' and reloads the page with the new param.
		function changeStimuli(stimuli) 
		{
			var url = new window.URL(document.location);
			//change the current stimuli paramater to this new value
			url.searchParams.set("stimuli", stimuli);
			//reload page with this newly URL.
			window.location.href = url.toString();
		}

		function changeUser(user)
		{
			var url = new window.URL(document.location);
			url.searchParams.set("user", user);
			window.location.href = url.toString();
		}

		function changeColor(color)
		{
			var url = new window.URL(document.location);
			url.searchParams.set("color", color);
			window.location.href = url.toString();
		}
		
	</script>
	<!-- End Coding Tarik Hacialiogullari -->
	
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-2.0.1.min.js"></script>

<style>
*{
	margin:0;
	padding:0;
}
html, body{
	height:100%;
}

body{background-color:#0c0129;
     background-image:url(blue.jpg);
     background-position:center;
     background-size:cover;
     background-blend-mode:soft-light;
 }

.heading{
     width:1500px;
     height:750px;
     margin:auto;
     position:absolute;
     top:0px; bottom:0px; right:0px; left:0px;
}
.Main_title{
	display: block;
	text-align: center;
	color:white;
	font-size:38pt;
	font-family:big john;
}
.Sub_introduction{
	display:block;
	margin-top:15px;
	text-align: center;
	color:white;
	font-size:14pt;
	font-family:serif;
}
.Buttons{
	text-align: center;
}
.Upload{
    text-align: center;
	display: inline-block;
	margin: 20px auto;
	width:180px;
	height:50px;
	border:3px solid white;
	background-color:rgba(255,255,255,0);
	color: white;
	font-family:sans-serif;
	font-weight:bold;
	border-radius: 5px;

	transition: background-color 1000ms, color 1000ms;
}
.User_comparison{
	text-align: center;
	display: inline-block;
	margin: 20px auto;
	width:180px;
	height:50px;
	border:3px solid white;
	background-color:rgba(255,255,255,0);
	color: white;
	font-family:sans-serif;
	font-weight:bold;
	border-radius: 5px;

	transition: background-color 1000ms, color 1000ms;
}
.Color_comparison{
	text-align: center;
	display: inline-block;
	margin: 20px auto;
	width:180px;
	height:50px;
	border:3px solid white;
	background-color:rgba(255,255,255,0);
	color: white;
	font-family:sans-serif;
	font-weight:bold;
	border-radius: 5px;

	transition: background-color 1000ms, color 1000ms;
}
.Manual_comparison{
	text-align: center;
	display: inline-block;
	margin: 20px auto;
	width:180px;
	height:50px;
	border:3px solid white;
	background-color:rgba(255,255,255,0);
	color: white;
	font-family:sans-serif;
	font-weight:bold;
	border-radius: 5px;

	transition: background-color 1000ms, color 1000ms;
}
.dropdowns{
	display:block;
	margin-top:15px;
	text-align: center;
	color:white;
	font-size:14pt;
	font-family:serif;
}
select {
  -webkit-appearance: none;
  -moz-appearance: none;
  -ms-appearance: none;
  appearance: none;
  outline: 0;
  box-shadow: none;
  border: 0 !important;
  background: #34495e;
  background-image: none;
}
select::-ms-expand {
  display: none;
}
.select {
  position: relative;
  display: flex;
  width: 20em;
  height: 3em;
  line-height: 3;
  background: #34495e;
  overflow: hidden;
  border-radius: .25em;
}
select {
  flex: 1;
  padding: 0 .5em;
  color: white;
  cursor: pointer;
}
.select::after {
  content: '\25BC';
  position: absolute;
  top: 0;
  right: 0;
  padding: 0 1em;
  background: #34495e;
  cursor: pointer;
  pointer-events: none;
  -webkit-transition: .25s all ease;
  -o-transition: .25s all ease;
  transition: .25s all ease;
}
.select:hover::after {
  color: #f39c12;
}
.User_comparison{
	text-align: center;
	margin: 20px auto;
	width:180px;
	height:50px;
	border:3px solid white;
	background-color:rgba(255,255,255,0);
	color: white;
	font-family:sans-serif;
	font-weight:bold;
	border-radius: 5px;
    display: inline-block;

	transition: background-color 1000ms, color 1000ms;
}

.Upload:hover{
	background-color:rgba(255,255,255,1);
	color:#222;
	cursor:pointer;

	transition: background-color 1000ms, color 1000ms;
}
.User_comparison:hover{
	background-color:rgba(255,255,255,1);
	color:#222;
	cursor:pointer;

	transition: background-color 1000ms, color 1000ms;
}
.Color_comparison:hover{
	background-color:rgba(255,255,255,1);
	color:#222;
	cursor:pointer;

	transition: background-color 1000ms, color 1000ms;
}
.Manual_comparison:hover{
	background-color:rgba(255,255,255,1);
	color:#222;
	cursor:pointer;

	transition: background-color 1000ms, color 1000ms;
}
</style>
</html>